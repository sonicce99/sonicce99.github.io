{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/react-toolkit-query/",
    "result": {"data":{"site":{"siteMetadata":{"title":"ë™ìˆ˜ì˜ ë¡œê·¸ë¶"}},"markdownRemark":{"id":"e5b413b1-898a-50eb-b638-46fef834733f","excerpt":"Overview ğŸŒŸ ë°°ìš¸ì . RTK QueryëŠ” ë¬´ì—‡ì´ê³ , ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ì§€. RTK Queryì•ˆì— ì–´ë–¤ Apië“¤ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€! ê¸°ë³¸ì ì¸ RTK Query ì‚¬ìš©ë²• ìµíˆê¸°! RTK QueryëŠ” ê°•ë ¥í•œ ë°ì´í„° fetching ê¸°ëŠ¥ê³¼ cachingâ€¦","html":"<h1>Overview</h1>\n<p>ğŸŒŸ ë°°ìš¸ì .</p>\n<ul>\n<li>\n<p>RTK QueryëŠ” ë¬´ì—‡ì´ê³ , ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ì§€.</p>\n</li>\n<li>\n<p>RTK Queryì•ˆì— ì–´ë–¤ Apië“¤ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€!</p>\n</li>\n<li>\n<p>ê¸°ë³¸ì ì¸ RTK Query ì‚¬ìš©ë²• ìµíˆê¸°!</p>\n</li>\n</ul>\n<p><strong>RTK Query</strong>ëŠ” ê°•ë ¥í•œ ë°ì´í„° fetching ê¸°ëŠ¥ê³¼ caching ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì›¹ì—ì„œ ë°ì´í„°ë¥¼ load í•˜ëŠ” ì¼ë°˜ì ì¸ ê²½ìš°ë¥¼ ë‹¨ìˆœí™”í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ fetching í•´ì˜¤ê³  ìºì‹±í•˜ëŠ” ë¡œì§ì„ ìš°ë¦¬ê°€ ì‘ì„±í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\n<p>RTK QueryëŠ” Redux Toolkit packageì— í¬í•¨ë˜ì–´ìˆëŠ” <strong>ì˜µì…”ë„í•œ addon</strong> ì…ë‹ˆë‹¤.</p>\n<h2>Motivation</h2>\n<p>ì›¹ì—ì„œëŠ” ì£¼ë¡œ ì„œë²„ì—ì„œ display í•˜ê¸°ìœ„í•´ ë°ì´í„°ë¥¼ fetch í•´ì™€ì•¼í•©ë‹ˆë‹¤. ë˜í•œ ì£¼ê¸°ì ìœ¼ë¡œ updateë¥¼ í•´ì•¼í•˜ê³  ì„œë²„ì— ë°ì´í„°ë¥¼ ë³´ë‚´ì•¼í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë™ê¸°ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— cached í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²ƒë“¤ì€ ìš”ì¦ˆìŒ ì›¹ì—ì„œ ë‹¤ë¥¸ ë™ì‘ë“¤ì„ êµ¬í˜„í•´ì•¼í•˜ê¸°ì— ë”ìš± ë³µì¡í•´ì§‘ë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p>ë¡œë”©ì¤‘ì¸ UIë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ loading stateë¥¼ tracking í•  ë•Œ.</p>\n</li>\n<li>\n<p>ê°™ì€ ë°ì´í„°ì—ì„œ ì¤‘ë³µ ìš”ì²­ì„ í”¼í•´ì•¼ í•  ë•Œ.</p>\n</li>\n<li>\n<p>ìºì‹œ lifetimeì„ ê´€ë¦¬ í•  ë•Œ.</p>\n</li>\n</ul>\n<p>ë“±ë“± ğŸ¤¥</p>\n<p>í•˜ì§€ë§Œ ReduxëŠ” ê³¼ê±°ë¶€í„° í•œë²ˆë„ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ì™„ì „íˆ í•´ê²°í•˜ê¸° ìœ„í•´ ì–´ë– í•œ ê²ƒë„ í•œ ì ì´ ì—†ìŠµë‹ˆë‹¤. ì‹¬ì§€ì–´ ìš°ë¦¬ê°€ <code class=\"language-text\">createAsyncThunk</code> ë¥¼ <code class=\"language-text\">createSlice</code> ì™€ í•¨ê»˜ ì‚¬ìš©í•  ë•Œë„, ìš°ë¦¬ê°€ í•´ì•¼í•  ê²ƒì€ êµ‰ì¥íˆ ë§ì•˜ìŠµë‹ˆë‹¤. async thunkë¥¼ ë§Œë“¤ì–´ì•¼ í–ˆê³ , ìš”ì²­ì„ ë§Œë“¤ì–´ì•¼ í–ˆê³ , responseì—ì„œ ì ì ˆí•œ fieldsë¥¼ ë½‘ì•„ë‚´ì•¼í–ˆê³ , ë¡œë”© ìƒíƒœë¥¼ ì¶”ê°€í•˜ê³ , <code class=\"language-text\">pending/fulfilled/rejected</code> ìƒíƒœë¥¼ ìœ„í•´ <code class=\"language-text\">extraReducers</code>ë¥¼ ì¶”ê°€í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ì§€ë‚œ ëª‡ ë…„ ë™ì•ˆ React ì»¤ë®¤ë‹ˆí‹°ëŠ” â€œë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë° ìºì‹±â€ì´ â€œìƒíƒœ ê´€ë¦¬â€ì™€ ì‹¤ì œë¡œëŠ” ë‹¤ë¥¸ ë¬¸ì œë¼ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ RTK QueryëŠ” ë°ì´í„° fetchingì— ì„ êµ¬ìì¸ Apollo Client, React Query, Urql, and SWRë¡œ ë¶€í„° ì˜ê°ì„ ë°›ì•˜ê³ , ë…íŠ¹í•œ Api ë””ìì¸ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p>ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë° ìºì‹± ë¡œì§ì€ Redux Toolkitì˜ createSlice ë° createAsyncThunk APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>API ì—”ë“œí¬ì¸íŠ¸ëŠ” ì¸ìˆ˜ì—ì„œ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ë¥¼ ìƒì„±í•˜ê³  ìºì‹±ì„ ìœ„í•´ ì‘ë‹µì„ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ í¬í•¨í•˜ì—¬ ë¯¸ë¦¬ ì •ì˜ë©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ë˜í•œ ì „ì²´ ë°ì´í„°ë¥¼ fetchingí•´ì˜¤ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì••ì¶•í•œ React hooksë¥¼ ìƒì„±í•˜ê³ , data ë° isFetching fieldsë¥¼ ì œê³µí•˜ê³ , êµ¬ì„± ìš”ì†Œê°€ ë§ˆìš´íŠ¸ ë° ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ìºì‹œëœ ë°ì´í„°ì˜ ìˆ˜ëª…ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>RTK QueryëŠ” ì™„ì „íˆ typeScriptë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ì™„ë²½í•œ TS ì‹œìš© ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>\n</li>\n</ul>\n<h2>Whatâ€™s included</h2>\n<h3>APIs</h3>\n<p>RTK QueryëŠ” <code class=\"language-text\">Redux Toolkit package</code> ì— ë‚´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒì˜ 2ê°€ì§€ entry pointsì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApi <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit/query\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApi <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit/query/react\"</span></code></pre></div>\n<ul>\n<li>createApi</li>\n</ul>\n<p>RTK Queryì˜ ê¸°ëŠ¥ì  core ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì„ ì„¤ëª…í•˜ëŠ” endpointsë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° â€œê¸°ë³¸ URLë‹¹ í•˜ë‚˜ì˜ API ìŠ¬ë¼ì´ìŠ¤â€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ë‹¹ í•œ ë²ˆ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>fetchBaseQuery</li>\n</ul>\n<p>fetchBaseQueryëŠ” <code class=\"language-text\">axios</code> ì™€ ê°™ì€ ì¼ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ request header ë° responseë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬ í•˜ëŠ” <code class=\"language-text\">fetch</code> ì˜ ì‘ì€ wrapper ì…ë‹ˆë‹¤. createApi ì•ˆì—ì„œ <code class=\"language-text\">baseQuery</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</p>\n<h3>Bundle Size</h3>\n<p>RTK QueryëŠ” Redux Toolkit ë° React-Reduxë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ í•˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ëœ í¬ê¸°ëŠ” ì•±ì—ì„œ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ì§€ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ì˜ˆìƒë˜ëŠ” min+gzip ë²ˆë“¤ í¬ê¸°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p>ì´ë¯¸ RTK ë¥¼ ì‚¬ìš©ì¤‘ì¸ê²½ìš° : ~9kb for RTK Query and ~2kb for the hooks.</p>\n</li>\n<li>\n<p>ì‚¬ìš©ì¤‘ì´ ì•„ë‹Œ ê²½ìš° : With React: 19kB + React-Redux, which is a peer dependency</p>\n</li>\n</ul>\n<p>ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ë¥¼ ì¶”ê°€í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ ëª‡ ë°”ì´íŠ¸ì— ë¶ˆê³¼í•œ ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ ë‚´ë¶€ì˜ ì‹¤ì œ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í¬ê¸°ê°€ ì¦ê°€í•©ë‹ˆë‹¤.</p>\n<h2>RTK Query cachingì— ëŒ€í•´</h2>\n<p>ReduxëŠ” í•­ìƒ ì˜ˆì¸¡ê°€ëŠ¥í•˜ê³ , ëª…ì‹œì ì¸ í–‰ë™ì„ ê°•ì¡°í–ˆìŠµë‹ˆë‹¤. â€˜Magicâ€™ ì€ ì—†ìœ¼ë©° ì•±ì€ í•­ìƒ ë¦¬ë“€ì„œë¥¼ í†µí•´ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ê³  ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë™ì¼í•œ ê¸°ë³¸ íŒ¨í„´ì„ ë”°ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<p><strong>Redux Toolkit core Apië„ ê¸°ë³¸ì ì¸ Redux app ë°ì´í„° flowì—ì„œ ë³€í•˜ì§€ ì•Šê³ </strong> ì‚¬ìš©ìëŠ” ì—¬ì „íˆ reducersë¥¼ ì‘ì„±í•˜ê³  dispatching í•©ë‹ˆë‹¤. ë‹¨ ë” ì ì€ ì½”ë“œë¡œ! <strong>RTK Query ë„ ê°™ì€ ë°©ì‹ì…ë‹ˆë‹¤.</strong></p>\n<p>â—ï¸ ëŒ€ì‹  <code class=\"language-text\">RTK Query</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ê³  ë°©ì‹ì˜ ì „í™˜ì´ ë°œìƒí•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë” ì´ìƒ <strong>ìƒíƒœ ê´€ë¦¬</strong> ìì²´ì— ëŒ€í•´ ìƒê°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  <strong>ìºì‹œëœ â€‹â€‹ë°ì´í„° ê´€ë¦¬</strong> ì— ëŒ€í•´ ìƒê°í•©ë‹ˆë‹¤. ë¦¬ë“€ì„œë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” ëŒ€ì‹  â€œì´ ë°ì´í„°ì˜ ì¶œì²˜ëŠ” ì–´ë””ì¸ê°€ìš”?â€, â€œì´ ì—…ë°ì´íŠ¸ë¥¼ ì–´ë–»ê²Œ ë³´ë‚´ì•¼ í•˜ë‚˜ìš”?â€, â€œì´ ìºì‹œëœ ë°ì´í„°ë¥¼ ì–¸ì œ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•˜ë‚˜ìš”?â€, ë° â€œìºì‹œëœ â€‹â€‹ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ë‚˜ìš”?â€œ. ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³ , ì €ì¥í•˜ê³ , ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì€ ë” ì´ìƒ ê±±ì •í•  í•„ìš”ê°€ ì—†ëŠ” êµ¬í˜„ ì„¸ë¶€ ì‚¬í•­ì´ ë©ë‹ˆë‹¤.</p>\n<hr>\n<h1>RTK Query ì„¤ì •</h1>\n<p>ì´ì œ RTK ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ëª¨ë“  ë¹„ë™ê¸° ë¡œì§ì„ â€‹â€‹ë§ˆì´ê·¸ë ˆì´ì…˜í•´ì•¼ í•©ë‹ˆë‹¤. ì§„í–‰í•˜ë©´ì„œ RTK ì¿¼ë¦¬ì˜ ëª¨ë“  ì£¼ìš” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ ê¸°ì¡´ <code class=\"language-text\">createAsyncThunk</code> ë° <code class=\"language-text\">createSlice</code> ì‚¬ìš©ì„ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì—¬ RTK ì¿¼ë¦¬ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<h2>Api Slice ì •ì˜í•˜ê¸°</h2>\n<p>ì´ì „ì—ëŠ” ê²Œì‹œë¬¼, ì‚¬ìš©ì ë° ì•Œë¦¼ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜• ê°ê°ì— ëŒ€í•´ ë³„ë„ì˜ <strong>Slices</strong>ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ê° Sliceì• ëŠ” ê³ ìœ í•œ reducerê°€ ìˆê³  ê³ ìœ í•œ actionê³¼ thunkë¥¼ ì •ì˜í•˜ê³  í•´ë‹¹ ë°ì´í„° ìœ í˜•ì— ëŒ€í•œ í•­ëª©ì„ ë³„ë„ë¡œ ìºì‹œí–ˆìŠµë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ RTK Query ì—ì„œëŠ” <strong>ìºì‹œëœ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ logicì´ ì• í”Œë¦¬ì¼€ì´ì…˜ë‹¹ ë‹¨ì¼ â€œAPI Sliceâ€ë¡œ ì¤‘ì•™ ì§‘ì¤‘í™”ë©ë‹ˆë‹¤.</strong></p>\n<p>ìƒˆ apiSlice.js íŒŒì¼ì„ ì •ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤. features/api/ í´ë”ë¥¼ ì¶”ê°€í•˜ê³  ê±°ê¸°ì— apiSlice.jsë¥¼ ë„£ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Import the RTK Query methods from the React-specific entry point</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createApi<span class=\"token punctuation\">,</span> fetchBaseQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@reduxjs/toolkit/query/react\"</span>\n\n<span class=\"token comment\">// Define our single API slice object</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> apiSlice <span class=\"token operator\">=</span> <span class=\"token function\">createApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// The cache reducer expects to be added at `state.api` (already default - this is optional)</span>\n  <span class=\"token literal-property property\">reducerPath</span><span class=\"token operator\">:</span> <span class=\"token string\">\"api\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// All of our requests will have URLs starting with '/fakeApi'</span>\n  <span class=\"token literal-property property\">baseQuery</span><span class=\"token operator\">:</span> <span class=\"token function\">fetchBaseQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">baseUrl</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/fakeApi\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// The \"endpoints\" represent operations and requests for this server</span>\n  <span class=\"token function-variable function\">endpoints</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The `getPosts` endpoint is a \"query\" operation that returns data</span>\n    <span class=\"token literal-property property\">getPosts</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// The URL for the request is '/fakeApi/posts'</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"/posts\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Export the auto-generated hook for the `getPosts` query endpoint</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> useGetPostsQuery <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> apiSlice</code></pre></div>\n<p>RTK QueryëŠ” <code class=\"language-text\">createApi</code> ë¼ëŠ” í•˜ë‚˜ì˜ methodì— ê¸°ë°˜í•©ë‹ˆë‹¤.\nì§€ê¸ˆê¹Œì§€ ë³¸ ëª¨ë“  Redux Toolkit APIëŠ” UIì— êµ¬ì• ë°›ì§€ ì•Šìœ¼ë©° ëª¨ë“  UI ê³„ì¸µì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. RTK ì¿¼ë¦¬ í•µì‹¬ ë¡œì§ì€ ë™ì¼í•©ë‹ˆë‹¤.\nê·¸ëŸ¬ë‚˜ RTK ì¿¼ë¦¬ì—ëŠ” createApiì˜ <code class=\"language-text\">React ì „ìš© ë²„ì „</code>ë„ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° RTKì™€ Reactë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ RTKì˜ React í†µí•©ì„ í™œìš©í•˜ë ¤ë©´ ì´ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ <code class=\"language-text\">@reduxjs/toolkit/query/react</code>ì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>\n<p>ğŸŒŸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” createApi í˜¸ì¶œì´ <strong>í•˜ë‚˜ë§Œ</strong> ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì´ í•˜ë‚˜ì˜ API ìŠ¬ë¼ì´ìŠ¤ì—ëŠ” ë™ì¼í•œ ê¸°ë³¸ URLê³¼ í†µì‹ í•˜ëŠ” ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì—”ë“œí¬ì¸íŠ¸ /api/posts ë° /api/usersëŠ” ëª¨ë‘ ë™ì¼í•œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë¯€ë¡œ ë™ì¼í•œ API ìŠ¬ë¼ì´ìŠ¤ë¡œ ì´ë™í•©ë‹ˆë‹¤. ì•±ì´ ì—¬ëŸ¬ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° ê° ëì ì—ì„œ ì „ì²´ URLì„ ì§€ì •í•˜ê±°ë‚˜ í•„ìš”í•œ ê²½ìš° ê° ì„œë²„ì— ëŒ€í•´ ë³„ë„ì˜ API ì¡°ê°ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì—¬ëŸ¬ íŒŒì¼ ê°„ì— ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¶„í• í•˜ë ¤ëŠ” ê²½ìš° ë¬¸ì„œì˜ 8ë¶€ ì„¹ì…˜ì—ì„œ â€˜Injecting Endpointsâ€™ ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”!</p>\n<h4>Injecting Endpoints</h4>\n<p>ë” í° ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê¸°ëŠ¥ì„ ë³„ë„ì˜ ë²ˆë“¤ë¡œ â€œcode-splitâ€ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. RTK ì¿¼ë¦¬ì—ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ë‹¹ í•˜ë‚˜ì˜ â€œAPI Sliceâ€ê°€ ìˆìœ¼ë©° ì§€ê¸ˆê¹Œì§€ apiSlice.jsì—ì„œ ì§ì ‘ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ ì¤‘ ì¼ë¶€ë¥¼ ì½”ë“œ ë¶„í• í•˜ê±°ë‚˜ API Slice íŒŒì¼ì´ ë„ˆë¬´ ì»¤ì§€ì§€ ì•Šë„ë¡ ë‹¤ë¥¸ íŒŒì¼ë¡œ ì´ë™í•˜ë ¤ëŠ” ê²½ìš° ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> apiSlice <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../api/apiSlice\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> extendedApiSlice <span class=\"token operator\">=</span> apiSlice<span class=\"token punctuation\">.</span><span class=\"token function\">injectEndpoints</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">endpoints</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">getUsers</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">\"/users\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> useGetUsersQuery <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> extendedApiSlice</code></pre></div>\n<h3>Api Slice Parameters</h3>\n<p>ìš°ë¦¬ê°€ <code class=\"language-text\">createApi</code>ë¥¼ í˜¸ì¶œí•  ë•Œ í•„ìˆ˜ ê°’ìœ¼ë¡œ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p>baseQuery(í•„ìˆ˜) : ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì„ ì•Œê³  ìˆëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. RTK ì¿¼ë¦¬ì—ëŠ” <code class=\"language-text\">fetchBaseQuery</code>ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ìš”ì²­ ë° ì‘ë‹µì˜ ì¼ë°˜ì ì¸ ì²˜ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” í‘œì¤€ fetch() í•¨ìˆ˜ ì£¼ë³€ì˜ ì‘ì€ wrapper ì…ë‹ˆë‹¤. fetchBaseQuery ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ëª¨ë“  í–¥í›„ ìš”ì²­ì˜ ê¸°ë³¸ URLì„ ì „ë‹¬í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ìš”ì²­ í—¤ë” ìˆ˜ì •ê³¼ ê°™ì€ ë™ì‘ì„ ì¬ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>endpoints(í•„ìˆ˜)</p>\n</li>\n<li>\n<p>reducerPath(ì˜µì…˜) : createApiëŠ” ë˜í•œ reducerPath í•„ë“œë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. ë§Œì•½ reducerPathë¥¼ ì˜µì…˜ìœ¼ë¡œ ë„£ì§€ ì•ŠëŠ”ë‹¤ë©´, <code class=\"language-text\">api</code> ë¼ëŠ” ì´ë¦„ì´ ê¸°ë³¸ìœ¼ë¡œ ë˜ë©°, state.apië¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜µì…˜ì„ ë„£ëŠ” ê²½ìš°, postsSliceì™€ ê°™ì€ ë‹¤ë¥¸ ìŠ¬ë¼ì´ìŠ¤ì˜ ê²½ìš° state.posts ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n</li>\n</ul>\n<h3>Endpoints ì •ì˜í•˜ê¸°</h3>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ query endpointsëŠ” <code class=\"language-text\">GET</code> HTTP requestë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤, í•˜ì§€ë§Œ URL ë¬¸ìì—´ ìì²´ ëŒ€ì‹  <code class=\"language-text\">{url: '/posts', method: 'POST', body: newPost}</code> ì™€ ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì—¬ ì´ë¥¼ ì¬ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í—¤ë” ì„¤ì •ê³¼ ê°™ì€ ì´ ë°©ë²•ìœ¼ë¡œ ìš”ì²­ì— ëŒ€í•œ ëª‡ ê°€ì§€ ë‹¤ë¥¸ ì˜µì…˜ì„ ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>RTK QueryëŠ” ìš°ë¦¬ê°€ ì •ì˜í•œ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•´ React hooksë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤!</strong> ì´ëŸ¬í•œ hooksëŠ” êµ¬ì„± ìš”ì†Œê°€ ë§ˆìš´íŠ¸ë  ë•Œ ìš”ì²­ì„ íŠ¸ë¦¬ê±°í•˜ê³  ìš”ì²­ì´ ì²˜ë¦¬ë˜ê³  ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ë•Œ êµ¬ì„± ìš”ì†Œë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ <code class=\"language-text\">encapsulate</code>í•©ë‹ˆë‹¤. React êµ¬ì„± ìš”ì†Œì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì´ API ìŠ¬ë¼ì´ìŠ¤ íŒŒì¼ì—ì„œ í•´ë‹¹ hooksë¥¼ export í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2>Store ì„¤ì •í•˜ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> postsReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/posts/postsSlice\"</span>\n<span class=\"token keyword\">import</span> usersReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/users/usersSlice\"</span>\n<span class=\"token keyword\">import</span> notificationsReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/notifications/notificationsSlice\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> apiSlice <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../features/api/apiSlice\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> postsReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> usersReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">notifications</span><span class=\"token operator\">:</span> notificationsReducer<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>apiSlice<span class=\"token punctuation\">.</span>reducerPath<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> apiSlice<span class=\"token punctuation\">.</span>reducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">middleware</span><span class=\"token operator\">:</span> <span class=\"token parameter\">getDefaultMiddleware</span> <span class=\"token operator\">=></span>\n    <span class=\"token function\">getDefaultMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>apiSlice<span class=\"token punctuation\">.</span>middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h1>Queriesë¡œ ëª©ë¡ displaying í•´ë³´ê¸°</h1>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Spinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/Spinner\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PostAuthor <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./PostAuthor\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> TimeAgo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./TimeAgo\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ReactionButtons <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ReactionButtons\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useGetPostsQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../api/apiSlice\"</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">PostExcerpt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> post <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>article className<span class=\"token operator\">=</span><span class=\"token string\">\"post-excerpt\"</span> key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>PostAuthor userId<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>TimeAgo timestamp<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"post-content\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>ReactionButtons post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/posts/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"button muted-button\"</span><span class=\"token operator\">></span>\n        View Post\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostsList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> posts<span class=\"token punctuation\">,</span>\n    isLoading<span class=\"token punctuation\">,</span>\n    isSuccess<span class=\"token punctuation\">,</span>\n    isError<span class=\"token punctuation\">,</span>\n    error<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useGetPostsQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">let</span> content\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Spinner text<span class=\"token operator\">=</span><span class=\"token string\">\"Loading...\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSuccess<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> posts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>PostExcerpt key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">\"posts-list\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Posts<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í˜„ì¬ <code class=\"language-text\">&lt;PostList></code>ëŠ” posts dataë¥¼ ì½ê³  ë¡œë”© ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ <code class=\"language-text\">useSelector</code>, <code class=\"language-text\">useDispatch</code>, <code class=\"language-text\">useEffect</code> ë¥¼ ê°€ì§€ê³  ì˜µë‹ˆë‹¤. <strong>í•˜ì§€ë§Œ useGetPostsQueryëŠ” ëª¨ë“  ê²ƒì„ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</strong></p>\n<h2>posts ì •ë ¬í•˜ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// omit setup</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostsList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    ğŸŒŸ data<span class=\"token operator\">:</span> posts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    isLoading<span class=\"token punctuation\">,</span>\n    isSuccess<span class=\"token punctuation\">,</span>\n    isError<span class=\"token punctuation\">,</span>\n    error\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useGetPostsQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  ğŸŒŸ <span class=\"token keyword\">const</span> sortedPosts <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> sortedPosts <span class=\"token operator\">=</span> posts<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Sort posts in descending chronological order</span>\n    sortedPosts<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">localeCompare</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> sortedPosts\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>posts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">let</span> content\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Spinner text<span class=\"token operator\">=</span><span class=\"token string\">\"Loading...\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSuccess<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ğŸŒŸ content <span class=\"token operator\">=</span> sortedPosts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>PostExcerpt key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">\"posts-list\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Posts<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Queryì— Parameter ë„£ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> apiSlice <span class=\"token operator\">=</span> <span class=\"token function\">createApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducerPath</span><span class=\"token operator\">:</span> <span class=\"token string\">'api'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">baseQuery</span><span class=\"token operator\">:</span> <span class=\"token function\">fetchBaseQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">baseUrl</span><span class=\"token operator\">:</span> <span class=\"token string\">'/fakeApi'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">endpoints</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">getPosts</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'/posts'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ğŸŒŸ getPost<span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token parameter\">postId</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/posts/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>postId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> useGetPostsQuery<span class=\"token punctuation\">,</span> useGetPostQuery <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> apiSlice</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\nğŸŒŸ <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Spinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../components/Spinner'</span>\nğŸŒŸ <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useGetPostQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/apiSlice'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PostAuthor <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./PostAuthor'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> TimeAgo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./TimeAgo'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ReactionButtons <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./ReactionButtons'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SinglePostPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> postId <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> match<span class=\"token punctuation\">.</span>params\n\n  ğŸŒŸ <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">,</span> isFetching<span class=\"token punctuation\">,</span> isSuccess <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useGetPostQuery</span><span class=\"token punctuation\">(</span>postId<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">let</span> content\n  ğŸŒŸ <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFetching<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Spinner text<span class=\"token operator\">=</span><span class=\"token string\">\"Loading...\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isSuccess<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    content <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>article className<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>PostAuthor userId<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>TimeAgo timestamp<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"post-content\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ReactionButtons post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/editPost/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span><span class=\"token operator\">></span>\n          Edit Post\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>section<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°„ë‹¨í•œ Query Hook ì‚¬ìš©í•´ë³´ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PostDetail</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> post<span class=\"token punctuation\">,</span>\n    isFetching<span class=\"token punctuation\">,</span>\n    isLoading<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useGetPostQuery</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">pollingInterval</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">refetchOnMountOrArgChange</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">skip</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Loading<span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>post<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Missing post<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>isFetching <span class=\"token operator\">?</span> <span class=\"token string\">\"...refetching\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h1>Mutations</h1>\n<p>mutation endpointëŠ” query endpoint ì™€ êµ‰ì¥íˆ ìœ ì‚¬í•©ë‹ˆë‹¤. ê°€ì¥ í° ì°¨ì´ì ì€ <code class=\"language-text\">builder.query()</code> ëŒ€ì‹ ì— <code class=\"language-text\">builder.mutation()</code>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  HTTP methodì„ <code class=\"language-text\">POST</code> ë¡œ ë°”ê¿”ì•¼ í•˜ê³  <code class=\"language-text\">body</code>ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> apiSlice <span class=\"token operator\">=</span> <span class=\"token function\">createApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducerPath</span><span class=\"token operator\">:</span> <span class=\"token string\">\"api\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">baseQuery</span><span class=\"token operator\">:</span> <span class=\"token function\">fetchBaseQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">baseUrl</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/fakeApi\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">endpoints</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">addNewPost</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token parameter\">initialPost</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/posts\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Include the entire post object as the body of the request</span>\n        <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> initialPost<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> useAddNewPostMutation <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> apiSlice</code></pre></div>\n<h2>Â ì»´í¬ë„ŒíŠ¸ì—ì„œ mutation hook ì‚¬ìš©í•˜ê¸°</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Spinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../components/Spinner'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useAddNewPostMutation <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../api/apiSlice'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> selectAllUsers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../users/usersSlice'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AddPostForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>title<span class=\"token punctuation\">,</span> setTitle<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>content<span class=\"token punctuation\">,</span> setContent<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>userId<span class=\"token punctuation\">,</span> setUserId<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n  ğŸŒŸ <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>addNewPost<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> isLoading <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useAddNewPostMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>selectAllUsers<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onTitleChanged</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onContentChanged</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onAuthorChanged</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setUserId</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n\n  ğŸŒŸ <span class=\"token keyword\">const</span> canSave <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>title<span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> userId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span>Boolean<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>isLoading\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSavePostClicked</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>canSave<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        ğŸŒŸ <span class=\"token keyword\">await</span> <span class=\"token function\">addNewPost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> title<span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> userId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setUserId</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Failed to save the post: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// omit rendering logic</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>mutation hooksëŠ” 2ê°€ì§€ë¥¼ return í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>\n<p>ì²«ë²ˆì§¸ ê°’ì€ <code class=\"language-text\">trigger function</code> ì…ë‹ˆë‹¤. ì´ê²Œ í˜¸ì¶œë˜ë©´ ì„œë²„ë¡œ requestë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ë‘ ë²ˆì§¸ ê°’ì€ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ìš”ì²­ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤(ìˆëŠ” ê²½ìš°). ì—¬ê¸°ì—ëŠ” ìš”ì²­ì´ ì§„í–‰ ì¤‘ì¸ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” isLoading í”Œë˜ê·¸ê°€ í¬í•¨ë©ë‹ˆë‹¤.</p>\n</li>\n</ul>\n<p>â—ï¸ ê¸°ì¡´ thunk ë””ìŠ¤íŒ¨ì¹˜ ë° êµ¬ì„± ìš”ì†Œ ë¡œë“œ ìƒíƒœë¥¼ useAddNewPostMutation hooksì˜ íŠ¸ë¦¬ê±° í•¨ìˆ˜ ë° isLoading í”Œë˜ê·¸ë¡œ ë°”ê¿€ ìˆ˜ ìˆìœ¼ë©° ë‚˜ë¨¸ì§€ êµ¬ì„± ìš”ì†ŒëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.</p>\n<p>addNewPostë¥¼ í˜¸ì¶œí•  ë•Œ ì´ê²ƒì€ <code class=\"language-text\">.unwrap</code>ë¼ëŠ” íŠ¹ë³„í•œ Promiseë¥¼ ë°˜í™˜í•˜ê³  ry/catch ë¸”ë¡ìœ¼ë¡œ ì ì¬ì ì¸ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ addNewPost().unwrap()ì„ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2>ìë™ refreshing.</h2>\n<p>ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ í´ë¦­í•˜ì—¬ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê²Œ í•˜ëŠ” ê²ƒì´ ë•Œë•Œë¡œ í•„ìš”í•˜ì§€ë§Œ ì¼ë°˜ì ì¸ ì‚¬ìš©ì—ëŠ” í™•ì‹¤íˆ ì¢‹ì€ ì†”ë£¨ì…˜ì´ ì•„ë‹™ë‹ˆë‹¤.</p>\n<p>ìš°ë¦¬ëŠ” â€œì„œë²„â€ì— ë°©ê¸ˆ ì¶”ê°€í•œ ê²Œì‹œë¬¼ì„ í¬í•¨í•˜ì—¬ ëª¨ë“  ê²Œì‹œë¬¼ì˜ ì „ì²´ ëª©ë¡ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤. ì´ìƒì ìœ¼ë¡œëŠ” ë³€í˜• ìš”ì²­ì´ ì™„ë£Œë˜ëŠ” ì¦‰ì‹œ ì•±ì´ ì—…ë°ì´íŠ¸ëœ ê²Œì‹œë¬¼ ëª©ë¡ì„ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ê·¸ë ‡ê²Œ í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìºì‹œ ë°ì´í„°ê°€ ì„œë²„ì— ìˆëŠ” ë°ì´í„°ì™€ ë™ê¸°í™”ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>RTK ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ â€œtagsâ€ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë°ì´í„° refetchingì„ í™œì„±í™”í•˜ê¸° ìœ„í•´ queryì™€ mutations ê°„ì˜ ê´€ê³„ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>â€œtagsâ€ëŠ” íŠ¹ì • ìœ í˜•ì˜ ë°ì´í„°ì— ì´ë¦„ì„ ì§€ì •í•˜ê³  ìºì‹œì˜ ì¼ë¶€ë¥¼ ë¬´íš¨í™”í•  ìˆ˜ ìˆëŠ” string ë˜ëŠ” object ì…ë‹ˆë‹¤. ìºì‹œ tagê°€ invalidated ë˜ë©´ RTK ì¿¼ë¦¬ëŠ” tagê°€ í‘œì‹œëœ endpointë¥¼ ìë™ìœ¼ë¡œ refetch í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> apiSlice <span class=\"token operator\">=</span> <span class=\"token function\">createApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">reducerPath</span><span class=\"token operator\">:</span> <span class=\"token string\">'api'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">baseQuery</span><span class=\"token operator\">:</span> <span class=\"token function\">fetchBaseQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">baseUrl</span><span class=\"token operator\">:</span> <span class=\"token string\">'/fakeApi'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  ğŸŒŸ tagTypes<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Post'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function-variable function\">endpoints</span><span class=\"token operator\">:</span> <span class=\"token parameter\">builder</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token literal-property property\">getPosts</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'/posts'</span><span class=\"token punctuation\">,</span>\n      ğŸŒŸ providesTags<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Post'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">addNewPost</span><span class=\"token operator\">:</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">query</span><span class=\"token operator\">:</span> <span class=\"token parameter\">initialPost</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">'/posts'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> initialPost\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      ğŸŒŸ invalidatesTags<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Post'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"React-Toolkit-Query ê³µì‹ë¬¸ì„œ ë¿Œì‹œê¸° ğŸ—¿","date":"June 20, 2022","description":"ê¸°ì¡´ì˜ OMS(ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ)ì€ Redux-thunkì™€ RTK-Queryê°€ í˜¼ì¬ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.ğŸ¥² í•˜ì§€ë§Œ WMS(ì°½ê³  ê´€ë¦¬ ì‹œìŠ¤íƒ¬)ì„ ê°œë°œí•˜ë©´ì„œ ìš°ë¦¬ëŠ” RTK-Queryë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸°ë¡œ í–ˆê³  ì¶”í›„ì— RTK-Queryë¡œ ì™„ì „íˆ migaration í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì¢€ ë” ìì„¸íˆ RTK-Queryë¥¼ ì´í•´í•´ì•¼ë§Œ í–ˆê¸° ë•Œë¬¸ì— ê³µì‹ë¬¸ì„œë¥¼ ì½ê³  ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤."}},"previous":{"fields":{"slug":"/setTimeOut_setInterval/"},"frontmatter":{"title":"Reactì™€ setTimeout ê·¸ë¦¬ê³  setIntervalì— ëŒ€í•œ ì´í•´. (feat.closure)"}},"next":{"fields":{"slug":"/jest/"},"frontmatter":{"title":"Jest ê³µì‹ë¬¸ì„œ ë¿Œì‹œê¸° ğŸ—¿"}}},"pageContext":{"id":"e5b413b1-898a-50eb-b638-46fef834733f","previousPostId":"24fa2afe-db8b-5fe7-9ff9-be2e94f7a477","nextPostId":"138489f4-1a9f-5b62-81b0-43562124a8d5"}},
    "staticQueryHashes": ["230163734","3589320610"]}