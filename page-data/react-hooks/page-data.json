{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/react-hooks/",
    "result": {"data":{"site":{"siteMetadata":{"title":"동수의 로그북"}},"markdownRemark":{"id":"a786a293-bc2f-5194-8a5a-01c206cf42c1","excerpt":"마법 같았던 React-hooks. 🧚‍♀️ 필자가 React를 처음 배울 때 가장 먼저 배웠던게 useState였다.\n몇 번 써보았던 나는 곧 useState의 편리함에 빠져버렸고 useState…","html":"<h2>마법 같았던 React-hooks. 🧚‍♀️</h2>\n<p>필자가 React를 처음 배울 때 가장 먼저 배웠던게 useState였다.\n몇 번 써보았던 나는 곧 useState의 편리함에 빠져버렸고 useState를 마구마구 쓰기 시작했다.</p>\n<p>그러던 어느날… 🥲</p>\n<img width=\"700px\" src=\"https://user-images.githubusercontent.com/87749134/182306514-75065fbf-0bb5-49a8-98d2-aad8d51b6e3e.png\">\n<p>오잉? 이게 무슨 말이야 😭</p>\n<p>React 공식문서에서 해당 error를 찾아보니 다음과 같은 이유가 나왔다.</p>\n<ol>\n<li>\n<p>React와 React DOM의 버전이 일치하지 않을 수 있습니다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">Hooks 규칙</code>을 위반했을 수 있습니다.</p>\n</li>\n<li>\n<p>같은 앱에 React가 한 개 이상있을 수 있습니다.</p>\n</li>\n</ol>\n<p>가장 유력했던 원인이 2번일거 같다는 생각이 들었다. 그런데</p>\n<p><strong>Hooks의 규칙이 뭐지?</strong></p>\n<p>공식문서에는 다음과 같이 나와있었다.</p>\n<ul>\n<li>\n<p>Hooks의 규칙 위반</p>\n<ul>\n<li>\n<p>함수 컴포넌트의 본문 최상위 레벨에서 호출하세요.</p>\n</li>\n<li>\n<p>사용자 정의 Hook 본체의 최상위 레벨에서 호출하세요.</p>\n</li>\n<li>\n<p>클래스 컴포넌트에서 Hooks를 호출하지 마세요.</p>\n</li>\n<li>\n<p>이벤트 핸들러에서 호출하지 마세요.</p>\n</li>\n<li>\n<p>useMemo, useReducer or useEffect에 전달된 함수 내에서 Hooks를 호출하지 마세요.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>📍 이러나 저러나 맨 위의 2가지의 규칙 모두 <code class=\"language-text\">최상위 레벨</code>에서 사용하라고 나와있다. 그런데 왜 그래야 할까??</p>\n<p>필자는 몇 가지의 강의를 듣고 있다. 위의 의문을 품은지 꽤 시간이 지나고 어느날 <a href=\"https://fastcampus.co.kr/dev_academy_kmt2\">김민태의 프론트엔드 아카데미 : 제 2강 만들어보며 이해하는 React &#x26; Redux</a> 강의를 듣던 중 의문을 일정 부분 해소 할 수 있었다.</p>\n<p>그리고 더 시간이 지나 황준일 개발자님의 <a href=\"https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Make-useSate-hook/#vanilla-javascript%E1%84%85%E1%85%A9-react-usestate-hook-%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5\">Vanilla Javascript로 React UseState Hook 만들기</a> 블로그를 읽어 보며 한번 더 Hooks에 대한 공부를 할 수 있었고 직접 예제를 구현해보면서 hooks에 대해 확실히 이해할 수 있게 되었다.</p>\n<p>자 이제 본격적으로 들어가보자!</p>\n<h3>Step1. 1개의 state를 유지하기</h3>\n<p>hooks 마법의 최대 핵심은 <code class=\"language-text\">컴포넌트가 다시 실행되어도 state값은 초기화되지 않고 유지된다.</code> 라는 점이다. 우선 1개의 state부터 유지시켜보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">// index.html\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>IE=edge<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>./useState.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Counter.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./useState.js\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      &lt;strong>count : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/strong>\n      &lt;button onclick=\"increase()\">증가&lt;/button>\n    &lt;/div></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// useState.js</span>\n\n<span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Counter.js\"</span>\n\n<span class=\"token comment\">// 처음엔 아무값도 할당하지 않음.</span>\n<span class=\"token keyword\">let</span> state <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">initState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// state에 값이 없을 때만 초기화.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> initState\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">newState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> newState\n    <span class=\"token comment\">// setState가 진행되면 렌더링을 다시 진행한다. (중요.)</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> renderCount <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> $root <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n  $root<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      &lt;div>하나의 useState 관리해보기&lt;/div>\n      &lt;br />\n      &lt;strong>총 렌더링 횟수 : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>renderCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/strong>\n      &lt;br />\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/div>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n\n  renderCount <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<iframe class=\"example-frame\" width=\"100%\" src=\"https://sonicce99.github.io/make-react-hooks/single-state/index.html\"></iframe>\n<p>state값을 useState함수 내부 스코프가 아닌 외부에 state를 저장해둠으로서 Counter.js를 재 렌더링하더라도 기존의 state를 유지 할 수 있게 만들었다. but 컴포넌트가 여러개 라면?? 여러개의 컴포넌트에서 각자 다른 state를 가지고 접근하고 싶다면 어떻게 할까?</p>\n<p>하나의 state 값에서 여러 컴포넌트가 값을 가져다 쓸 수는 없을 것이다. 그러면 어떻게 해야 할까?</p>\n<ul>\n<li>\n<p>배열에 차곡차곡 push해서 값들을 유지하자!</p>\n</li>\n<li>\n<p>각각의 값은 index를 통해 접근해서 가져올 수 있다.</p>\n</li>\n</ul>\n<p>이 2가지의 방법을 생각하면서 다음의 과정을 진행해보자.</p>\n<h3>Step2. 여러개의 state를 유지하기</h3>\n<p>자 우선 아래의 클릭 버튼을 클릭해보고 일단 변화를 관찰해보자.</p>\n<iframe class=\"example-frame\" width=\"100%\" src=\"https://sonicce99.github.io/make-react-hooks/multi-state/index.html\"></iframe>\n<p>클릭이라는 버튼과 피자라는 버튼을 클릭했을 때 클릭한 횟수와 피자는 어디 문자열이 하나씩 잘 늘어나는것을 볼 수 있다.</p>\n<p>코드를 살펴보자.</p>\n<p>여기서는 Counter.js는 변경 사항이 앖고 Pizza.js가 추가되었다!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Counter.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./useState.js\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>click<span class=\"token punctuation\">,</span> setClick<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"클릭!\"</span><span class=\"token punctuation\">)</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setClick</span><span class=\"token punctuation\">(</span>click <span class=\"token operator\">+</span> <span class=\"token string\">\"클릭!\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      &lt;span>클릭한 횟수 : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span>\n      &lt;button onclick=\"increase()\">클릭&lt;/button>\n      &lt;div></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>click<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div> \n    &lt;/div></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Pizza.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./useState.js\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Pizza</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pizza<span class=\"token punctuation\">,</span> setPizza<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"도미노?\"</span><span class=\"token punctuation\">)</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">meow</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPizza</span><span class=\"token punctuation\">(</span>pizza <span class=\"token operator\">+</span> <span class=\"token string\">\"파파존스!\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div>\n        &lt;strong>피자는 어디? : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pizza<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/strong>\n        &lt;button onclick=\"meow()\">피자&lt;/button>\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Pizza</code></pre></div>\n<p>아래의 useState.js 코드를 보면 currentStateKey와 states라는 전역 변수가 생겼다.</p>\n<p>states에 모든 값들을 전부 밀어넣어서 저장 시키고 currentStateKey를 통해서 특정 value에 접근하는 것을 확인할 수 있다.</p>\n<p>🌟 뿐만 아니라 자세히 살펴보면 render 함수 내부에서도 currentStateKey에 대한 접근이 필요히다는 것을 알 수 있다.</p>\n<blockquote>\n<p>❗️ useState는 필연적으로 render와 같이 사용된다는 것을 알 수 있다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// useState.js</span>\n\n<span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Counter.js\"</span>\n\n<span class=\"token keyword\">let</span> currentStateKey <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// useState가 실행 된 횟수</span>\n<span class=\"token keyword\">const</span> states <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// state를 보관할 배열</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">initState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> currentStateKey\n\n  <span class=\"token comment\">// initState로 초기값 설정</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>states<span class=\"token punctuation\">[</span>currentStateKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    states<span class=\"token punctuation\">[</span>currentStateKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> initState\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// state 할당</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> states<span class=\"token punctuation\">[</span>currentStateKey<span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">newState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// state를 직접 수정하는 것이 아닌, states 내부의 값을 수정</span>\n    states<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newState\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  currentStateKey <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> renderCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> $root <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 아래와 같은 순서로 렌더링 되기 때문에 렌더링 되는 순서는 항상 같다.</span>\n  $root<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      &lt;div>여러개의 useState 관리해보기&lt;/div>\n      &lt;br />\n      &lt;strong>렌더링 횟수 : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>renderCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/strong>\n      &lt;br />\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/div>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n\n  renderCount <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\n  <span class=\"token comment\">/* setState가 호출된 양 만큼 currentStateKey값이 증가하기 때문에\n     render호출이 끝나면 다시 0으로 저장해서 나중에 다시 render될때\n     states 0번째 index부터 접근할 수 있게 해주어야한다.\n  */</span>\n  currentStateKey <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>실제 useState 코드는 훨씬 복잡하겠지만 그래도 원리를 알면 생각보다 간단하다는 것을 알 수 있다.</p>\n<p>하지만 위 코드에서 보면 뭔가 이상한게 보이지 않는가?</p>\n<p>클릭이라는 버튼을 클릭하면 클릭한 횟수는 1씩 잘 증가하지만 총 렌더링 횟수는 2씩 증가하는 것을 볼 수 있다. 무엇인가 비효율적으로 render되고 있다는 것을 체크 할 수 있다.</p>\n<p>useState 동작원리는 이제 다 알았으니 이제 최적화에 대해 알아보자!</p>\n<h2>useState 최적화</h2>\n<p>앞에서는 useState에 <code class=\"language-text\">값을 유지하는 방법</code>에 대해서 공부해 보았다. 이번에는 최적화를 해보자.</p>\n<p>최적화를 하야할 경우는 기본적으로</p>\n<ul>\n<li>\n<p>변경 된 값이 없을 경우.</p>\n</li>\n<li>\n<p>동시에 여러 state가 변경 되는 경우.</p>\n</li>\n</ul>\n<p>일단 이 2가지가 있을 것이다.</p>\n<h3>변경된 값이 없을 경우</h3>\n<p>바로 위의 useState 코드는 실행시 무조건 render를 하게 되어 있다.</p>\n<p>그렇기 때문에 간단한 조건만 추가하면 값이 다를 경우에만 rendering 시키면 된다!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">initState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> currentStateKey\n\n  <span class=\"token comment\">// initState로 초기값 설정</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>states<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    states<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> initState\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// state 할당</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> states<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setState</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">newState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 값이 똑같은 경우</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newState <span class=\"token operator\">===</span> state<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n    <span class=\"token comment\">// 배열/객체일 때는 JSON.stringify를 통해 간단하게 비교할 수 있다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>newState<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n    <span class=\"token comment\">// state를 직접 수정하는 것이 아닌, states 내부의 값을 수정</span>\n    states<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newState\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  currentStateKey <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>간단하다!</p>\n<h3>동시에 여러 state가 변경되는 경우</h3>\n<p>setState가 실행되면 무조건 render가 실행되는 구조에서는 동시에 여러번 setState를 사용하는 경우에는 당연히 여러번 rendering하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Counter.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./useState.js\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>click<span class=\"token punctuation\">,</span> setClick<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"클릭!\"</span><span class=\"token punctuation\">)</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setClick</span><span class=\"token punctuation\">(</span>click <span class=\"token operator\">+</span> <span class=\"token string\">\"클릭!\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      &lt;span>클릭한 횟수 : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span>\n      &lt;button onclick=\"increase()\">클릭&lt;/button>\n      &lt;div></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>click<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div> \n    &lt;/div></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter</code></pre></div>\n<p>만약에 setState가 하나의 함수내에서 100개가 있다면?</p>\n<p>이 이벤트들을 모두 모아서 한번에 업데이트 칠 수는 없을까?</p>\n<p>이를 해결하기 위해 <code class=\"language-text\">debounce</code>를 이용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">debounce</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> delay <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> 야옹 <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"야옹\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">야옹</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">야옹</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">야옹</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">야옹</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행</span></code></pre></div>\n<p>💵 tip debounce</p>\n<blockquote>\n<p>debounce는 이벤트를 그룹화하여 특정시간이 지난 후 하나의 이벤트만 발생하도록 하는 기술입니다.</p>\n<p>즉, 순차적 호출을 하나의 그룹으로 “그룹화”할 수 있습니다.</p>\n<p>debounce 는 자주 사용 되는 이벤트나 함수 들의 실행되는 빈도를 줄여서, 성능 상의 유리함을 가져오기 위한 개념입니다.</p>\n<p>자주 사용되는 간단한 예로는 자동 완성이 있습니다.</p>\n<p>keyboard 가 한자씩 입력될 때마다, api 로 데이터를 가져오게 되면, 사용자의 의도와 무관한 요청 이 자주 발생되는데, 이를 줄이기 위해, 입력이 끝난후나, 입력되는 중간 중간 200ms 마다 api 값을 가져온다면, 성능에서 매우 유리해집니다.</p>\n<p>디바운싱에 대한 자세한 설명이나 예제 코드는 <a href=\"https://webclub.tistory.com/607\">여기</a>에서 확인해 보세요!</p>\n</blockquote>\n<img width=\"500px\" src=\"https://user-images.githubusercontent.com/87749134/182535326-c25244ad-6cd4-4306-b5a5-58b067bfc893.png\">\n<blockquote>\n<p>현재 필자의 맥북의 주사율은 75Hz이다.</p>\n</blockquote>\n<p>즉 1초에 75번 변화할 수 있다. 그 이상의 rendering은 사실상 불필요하다.</p>\n<p>😊 결론 : 각자 컴퓨터의 주사율에 따라서 rendering 시키면 최적화를 할 수 있다!</p>\n<p>이것을 도와주는 Web Api가 바로 <code class=\"language-text\">requestAnimationFrame</code> 이다. requestAnimationFrame는 자신의 컴퓨터 주사율에 맞춰서 자동으로 업데이트를 쳐준다.</p>\n<p>다음 코드르 실행시켜 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> start <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">callback</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> ts <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ts <span class=\"token operator\">-</span> <span class=\"token number\">1000</span> <span class=\"token operator\">></span> start<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// console.log('End');</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>자신의 컴퓨터 주사율에 따라서 count가 표시될것이다.</p>\n<p>60Hz => 1초애 60회</p>\n<p>75Hz => 1초에 75회</p>\n<p>144Hz => 1초에 144회</p>\n<p>이제 debounce에 requestAnimationFrame을 적용시켜보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">debounce</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">callback</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> 클릭 <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"클릭\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">클릭</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">클릭</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">클릭</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행 취소</span>\n<span class=\"token function\">클릭</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 실행</span></code></pre></div>\n<p>자! 이제 1초에 75번반 렌더링 하면서 맨 마지막 이벤트만 동작시키는 함수가 완성되었다!</p>\n<p>이제 rendering 함수에 이를 적용시켜보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> render <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> $root <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 아래와 같은 순서로 렌더링 되기 때문에 렌더링 되는 순서는 항상 같다.</span>\n  $root<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/div>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n\n  currentStateKey <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<iframe class=\"example-frame\" width=\"100%\" src=\"https://sonicce99.github.io/make-react-hooks/debounce-requestAnimationFrame/index.html\"></iframe>\n<p>총 렌더링 횟수가 같이 잘 올라가는 것을 확인할 수 있다! 😆</p>\n<h2>다시 처음으로</h2>\n<p><del>수미상관 구조</del></p>\n<p>필자가 처음 만났던 에러 🥲</p>\n<p>이젠 무섭지 않아!! 🎃</p>\n<img width=\"700px\" src=\"https://user-images.githubusercontent.com/87749134/182306514-75065fbf-0bb5-49a8-98d2-aad8d51b6e3e.png\">\n<p>이 에러가 왜 발생했는지 이제는 확실하게 말할 수 있다.</p>\n<p>왜 최상위에 hooks가 존재해야만 하는지 확실하게 말할 수 있다.</p>\n<p>왜 useEffect안에서 hooks를 호출 할 수 없는지 확살하게 알고 있다.</p>\n<p>states에 array로 값들을 저장하고 currentStateKey로 접근해서 값을 빼오기 때문에 최상위가 아닌 다른 렌더링 조건이 걸려있으면 호출 할 수가 없는것이다.</p>\n<h2>마무리 하며</h2>\n<p><a href=\"https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Make-useSate-hook/#_2-%E1%84%83%E1%85%A9%E1%86%BC%E1%84%89%E1%85%B5%E1%84%8B%E1%85%A6-%E1%84%8B%E1%85%A7%E1%84%85%E1%85%A5-setstate%E1%84%80%E1%85%A1-%E1%84%89%E1%85%B5%E1%86%AF%E1%84%92%E1%85%A2%E1%86%BC%E1%84%83%E1%85%AC%E1%86%AF-%E1%84%80%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%AE\">황준일 개발자님의 블로그</a> 를 보며 정말 많이 배울 수 있었고 공부할 수 있었다. 특히 debounce와 requestAnimationFrame Api로 최적화를 하는 부분은 정말 공부에 깊이감이 다르다는 생각을 많이 하면서 블로그를 읽었다. 나도 이런 개발자가 되기 위해 열심히 노력해야겠다.</p>","frontmatter":{"title":"Vanila Javascript로 useState 구현하기","date":"August 02, 2022","description":"황준일 개발자님의 블로그를 보고 공부한 포스팅입니다."}},"previous":{"fields":{"slug":"/jest/"},"frontmatter":{"title":"Jest 공식문서 뿌시기 🗿"}},"next":null},"pageContext":{"id":"a786a293-bc2f-5194-8a5a-01c206cf42c1","previousPostId":"138489f4-1a9f-5b62-81b0-43562124a8d5","nextPostId":null}},
    "staticQueryHashes": ["230163734","3589320610"]}